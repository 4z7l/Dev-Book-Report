# Part 02 SOLID 설계 원칙

## 001 SOLID 원칙

- **변화에 유연하게 대처하기 위한 설계 원칙이다.**
- 단일 책임 원칙 (Single Responsibility Principle; SRP)
- 개방 폐쇄 원칙 (Open-Closed Principle; OCP)
- 리스코프 치환 원칙 (Liskov Substitution Principle; LSP)
- 인터페이스 분리 원칙 (Interface Segregation Principle; ISP)
- 의존 역전 원칙 (Dependency Inversion Principle; DIP)

## 002 SRP 단일 책임 원칙

> 클래스는 단 한 개의 책임을 가져야 한다. 클래스를 변경하는 이유는 단 한 개여야 한다.

- 객체 지향의 기본은 **객체에 책임을 할당**하는 데에 있음
- 객체가 담당하는 책임이 많아질수록 한 책임의 기능 변화가 다른 책임에 주는 영향은 증가함
- 만약 클래스 A가 X, Y책임을 둘다 가지고 있고 클래스 B는 A가 제공하는 X가 필요하다면, 필요없는 Y 책임까지 포함하게됨

**SRP 적용 후보**

- 클래스 A의 메소드 X, Y가 있음
- 클래스 B는 A의 메소드 X만 사용
- 클래스 C는 A의 메소드 Y만 사용

→ 클래스 A를 사용하는 B, C가 서로 다른 메소드를 사용한다면 A는 책임 분리의 후보가 됨.

## 003 OCP 개방 폐쇄 원칙

> 확장에는 열려 있어야 하고, 변경에는 닫혀 있어야 한다.

- 기능을 변경하거나 확장할 수 있으면서, 그 기능을 사용하는 기존 코드는 수정하지 않는다.
- **변경이 예상되는 곳을 추상화**해서 개방 폐쇄 원칙을 지킨다.

**개방 폐쇄 원칙 적용 방법**

1. 변화되는 부분을 추상화
2. 상속

**개방 폐쇄 원칙이 깨질 때의 주요 증상**

1. 다운 캐스팅을 한다.
2. 비슷한 if-else 블록이 존재한다.

## 004 LSP 리스코프 치환 원칙

> 상위 타입의 객체를 하위 타입의 객체로 치환해도 상위 타입을 사용하는 프로그램은 정상적으로 동작해야 한다.

- 상위 클래스 A를 이용하는 메소드에 하위 클래스 B를 넣어도 메소드는 정상적으로 동작해야 한다.

```java
// 상위 클래스 View와 하위 클래스 TextView가 있음
public class View{}
public class TextView extends View{}

// 상위 클래스 View를 사용하는 메소드 draw()가 있음
public void draw(View view){}

// draw에 View 대신 TextView를 넣어도 정상적으로 동작해야함
draw(new TextView())
```

- **리스코프 치환 원칙**을 어기면 **개방 폐쇄 원칙**을 어길 가능성이 높아짐
- JAVA의 `instanceof`는 리스코프 치환 원칙을 위반할 때 발생하는 증상
- 추상화를 더 시키면 해결 가능

## 005 ISP 인터페이스 분리 원칙

> 인터페이스는 그 인터페이스를 사용하는 클라이언트를 기준으로 분리해야 한다.

- 각 클라이언트가 필요로하는 인터페이스를 분리함으로써, 클라이언트가 사용하지 않는 인터페이스에 변경이 발생해도 영향을 받지 않도록 해야함.
- **EX)** C++에서 인터페이스 분리 원칙을 지키지 않는 경우, **사용하지 않는 인터페이스 변경에 의해 발생하는 소스 재컴파일** 문제가 야기됨

## 006 DIP 의존 역전 원칙

> 고수준 모듈은 저수문 모듈의 구현에 의존해서는 안된다. 저수준 모듈이 고수준 모듈에서 정의한 추상 타입에 의존해야 한다.

- 저수준 모듈이 변경되더라도 고수준 모듈은 변경되지 않아야 한다.
- **추상화**를 통해 실현 가능
- 개방 폐쇄 원칙의 기반이 됨
- 소스 코드 상에서의 의존은 역전되더라도 런타임시의 의존은 **고수준→저수준**이다.
- 변경의 유연함을 위한 원칙이다!

**DIP 적용전**

1. 상위 모듈은 하위 모듈을 통해 A를 사용한다.
2. 하위 모듈은 A를 구체적으로 구현한다.

**DIP 적용후**

1. 상위 모듈은 A를 사용한다.
2. A를 추상화한다.
3. 하위 모듈은 추상화한 A에 의존한다.